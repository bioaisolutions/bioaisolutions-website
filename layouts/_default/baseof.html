<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
  <head>
    <meta charset="utf-8">
    <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} - {{ .Site.Title }}{{ end }}</title>

    <!-- SEO Meta Tags-->
    <meta name="description" content="{{ .Site.Params.description }}">
    <meta name="keywords" content="{{ .Site.Params.keywords }}">
    <meta name="author" content="{{ .Site.Params.author }}">
    <meta name="BioAIsolutions" content="Bioinformatics + Genomics + AI">

    <!-- Viewport-->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- jQuery -->
    <script src="js/jquery-3.7.1.min.js"></script>

    <!-- Theme switcher (color modes) -->
    <script src="assets/js/theme-switcher.js"></script>

    <!-- Favicon and Touch Icons-->
    <link rel="icon" href="assets/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#080032">
    <meta name="msapplication-config" content="assets/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Vendor Styles-->
    <link rel="stylesheet" media="screen" href="assets/vendor/boxicons/boxicons.min.css">
    <link rel="stylesheet" media="screen" href="assets/vendor/swiper/swiper-bundle.min.css">

    <!-- Main Theme Styles + Bootstrap-->
    <link rel="stylesheet" media="screen" href="assets/css/theme.min.css">

    <!-- Page loading styles -->
    <style>
      html {
        scroll-behavior: smooth;
      }
      .page-loading {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 100%;
        -webkit-transition: all .4s .2s ease-in-out;
        transition: all .4s .2s ease-in-out;
        background-color: #fff;
        opacity: 0;
        visibility: hidden;
        z-index: 9999;
      }
      [data-bs-theme="dark"] .page-loading {
        background-color: #0b0f19;
      }
      .page-loading.active {
        opacity: 1;
        visibility: visible;
      }
      .page-loading-inner {
        position: absolute;
        top: 50%;
        left: 0;
        width: 100%;
        text-align: center;
        -webkit-transform: translateY(-50%);
        transform: translateY(-50%);
        -webkit-transition: opacity .2s ease-in-out;
        transition: opacity .2s ease-in-out;
        opacity: 0;
      }
      .page-loading.active > .page-loading-inner {
        opacity: 1;
      }
      .page-loading-inner > span {
        display: block;
        font-size: 1rem;
        font-weight: normal;
        color: #9397ad;
      }
      [data-bs-theme="dark"] .page-loading-inner > span {
        color: #fff;
        opacity: .6;
      }
      .page-spinner {
        display: inline-block;
        width: 2.75rem;
        height: 2.75rem;
        margin-bottom: .75rem;
        vertical-align: text-bottom;
        border: .15em solid #b4b7c9;
        border-right-color: transparent;
        border-radius: 50%;
        -webkit-animation: spinner .75s linear infinite;
        animation: spinner .75s linear infinite;
      }
      [data-bs-theme="dark"] .page-spinner {
        border-color: rgba(255,255,255,.4);
        border-right-color: transparent;
      }
      @-webkit-keyframes spinner {
        100% {
          -webkit-transform: rotate(360deg);
          transform: rotate(360deg);
        }
      }
      @keyframes spinner {
        100% {
          -webkit-transform: rotate(360deg);
          transform: rotate(360deg);
        }
      }
    </style>

    <!-- Page loading scripts -->
    <script>
      (function () {
        window.onload = function () {
          const preloader = document.querySelector('.page-loading');
          preloader.classList.remove('active');
          setTimeout(function () {
            preloader.remove();
          }, 1000);
        };
      })();
    </script>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-T3JHK7FJ');</script>
    <!-- End Google Tag Manager -->
  </head>

  <!-- Body -->
  <body>
    <!-- Page loading spinner -->
    <div class="page-loading active">
      <div class="page-loading-inner">
        <div class="page-spinner"></div><span>Loading...</span>
      </div>
    </div>

    <!-- Page wrapper for sticky footer -->
    <main class="page-wrapper" id="top">
      {{ block "main" . }}{{ end }}
    </main>

    <!-- Back to top button -->
    <a href="#top" class="btn-scroll-top" data-scroll>
      <span class="btn-scroll-top-tooltip text-muted fs-sm me-2">Top</span>
      <i class="btn-scroll-top-icon bx bx-chevron-up"></i>
    </a>

    <!-- Vendor Scripts -->
    <script src="assets/vendor/rellax/rellax.min.js"></script>
    <script src="assets/vendor/@lottiefiles/lottie-player/lottie-player.js"></script>
    <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>

    <!-- Main Theme Script -->
    <script src="assets/js/theme.min.js"></script>

    <!-- Theme switcher -->
    <script>
      // Simple theme switcher
      document.addEventListener('DOMContentLoaded', function() {
        const themeToggle = document.getElementById('theme-mode');
        if (themeToggle) {
          themeToggle.addEventListener('change', function() {
            const html = document.documentElement;
            if (this.checked) {
              html.setAttribute('data-bs-theme', 'dark');
              localStorage.setItem('theme', 'dark');
            } else {
              html.setAttribute('data-bs-theme', 'light');
              localStorage.setItem('theme', 'light');
            }
          });

          // Load saved theme
          const savedTheme = localStorage.getItem('theme');
          if (savedTheme) {
            document.documentElement.setAttribute('data-bs-theme', savedTheme);
            themeToggle.checked = savedTheme === 'dark';
          }
        }
      });
    </script>

    <!-- Cookie Banner -->
    <style>
      .cookie-banner {
        position: fixed;
        bottom: 0;
        width: 100%;
        padding: 20px;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
        z-index: 1000;
      }
    </style>
    <div id="cookie-banner" class="bg-light-subtle cookie-banner d-none">
      <p>We use cookies that are necessary to make our site work. We may also use additional cookies to analyze, improve, and personalize our content and your digital experience. For more information, <a href="#" id="view-details" class="text-primary">see our Cookie Policy</a>.</p>
      <div class="cookie-buttons ms-2">
        <button id="accept-cookies" class="btn btn-primary">Accept all cookies</button>
        <button id="reject-cookies" class="btn btn-secondary mt-2">Reject cookies</button>
      </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="cookieModal" tabindex="-1" aria-labelledby="cookieModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="cookieModalLabel">Cookie Policy</h5>
            <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p>We use cookies that are necessary to make our site work. We may also use additional cookies to analyze, improve, and personalize our content and your digital experience.</p>
            <p>Detailed description of our cookie usage:</p>
            <ul>
              <li><strong>Necessary Cookies:</strong> Essential for the website to function properly, such as CSRF tokens.</li>
              <li><strong>Analytics Cookies:</strong> Help us understand how our website is used and how we can improve it.</li>
              <li><strong>Personalization Cookies:</strong> Enhance your experience by remembering your preferences.</li>
            </ul>
          </div>
          <div class="modal-footer">
            <button id="modal-accept-cookies" class="btn btn-primary">Accept all cookies</button>
            <button id="modal-reject-cookies" class="btn btn-secondary">Reject cookies</button>
          </div>
        </div>
      </div>
    </div>

    <script>
    function setCookie(name, value, daysToExpire) {
      var expires = "";
      if (daysToExpire) {
        var date = new Date();
        date.setTime(date.getTime() + (daysToExpire * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toUTCString();
      }
      document.cookie = name + "=" + (value || "") + expires + "; path=/";
    }

    function getCookie(name) {
      var nameEQ = name + "=";
      const decodedCookie = decodeURIComponent(document.cookie);
      const ca = decodedCookie.split(';');
      for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
      }
      return null;
    }

    function deleteCookie(name) {
      if (getCookie(name)) {
        document.cookie = name + '=' +
          (path ? ';path=' + path : '') +
          (domain ? ';domain=' + domain : '') +
          ';expires=Thu, 01 Jan 1970 00:00:00 GMT';
      }
    }

    $(() => {
      const cookieBanner = $('#cookie-banner');
      const cookieModal = $('#cookieModal');

      // Check for cookie consent
      const cookieConsent = getCookie('cookies_accepted');

      if (!cookieConsent) {
        cookieBanner.removeClass('d-none');
      } else if (cookieConsent === 'true') {
        enableGACookies();
      }

      $('#accept-cookies').on('click', function() {
        setCookie('cookies_accepted', 'true', 365);
        enableGACookies();
        cookieBanner.addClass('d-none');
      });

      $('#reject-cookies').on('click', function() {
        setCookie('cookies_accepted', 'false', 365);
        cookieBanner.addClass('d-none');
      });

      $('#view-details').on('click', function(event) {
        event.preventDefault();
        cookieModal.modal('show');
      });

      $('#modal-accept-cookies').on('click', function() {
        setCookie('cookies_accepted', 'true', 365);
        enableGACookies();
        cookieModal.modal('hide');
        cookieBanner.addClass('d-none');
      });

      $('#modal-reject-cookies').on('click', function() {
        setCookie('cookies_accepted', 'false', 365);
        cookieModal.modal('hide');
        cookieBanner.addClass('d-none');
      });

      function enableGACookies() {
        // Load the gtag.js script only if cookies are accepted
        $.getScript('https://www.googletagmanager.com/gtag/js?id=G-F1XK94RJWG', function() {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-F1XK94RJWG');
        });
      }

      // Function to disable features that use cookies if not accepted
      function disableCookiesFeatures() {
        // Add your code to disable features that require cookies here
      }

      // Automatically disable features if cookies are rejected
      if (cookieConsent === 'false') {
        disableCookiesFeatures();
      }
    });
    </script>

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T3JHK7FJ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
  </body>
</html> 